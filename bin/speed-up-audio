#!/usr/bin/env bash

# Speeds up audio files

# Default speed increase
DEFAULT_SPEED=1.5

usage() {
    echo "Usage: $0 <filename> [speed]"
    echo "  <filename>: Path to the audio file to be sped up"
    echo "  [speed]: Optional speed increase factor (default is 1.5x)"
    exit 1
}

if [ $# -lt 1 ]; then
    usage
fi

FILENAME=$1
[ -z "$FILENAME" ] && usage

SPEED=${2:-$DEFAULT_SPEED}

# Extract the file extension
EXT="${FILENAME##*.}"
BASENAME="${FILENAME%.*}"

OUTPUT_FILE="sped_${BASENAME}.${EXT}"

ffmpeg -i "$FILENAME" -filter:a "atempo=$SPEED" -vn -map_metadata 0 -c:v copy "$OUTPUT_FILE"


echo "Processed file saved as: $OUTPUT_FILE"
